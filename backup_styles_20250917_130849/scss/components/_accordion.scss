// ==========================================================================
// Accordion Component
// ==========================================================================
//
// Collapsible accordion component for organizing content sections.
//

@import '../abstracts/variables';
@import '../abstracts/mixins';

// ==========================================================================
// Accordion Container
// ==========================================================================

.accordion {
  border-radius: $border-radius-base;
  overflow: hidden;
  box-shadow: $box-shadow-small;
}

// ==========================================================================
// Accordion Item
// ==========================================================================

.accordion-item {
  border-bottom: 1px solid $color-border;
  
  &:last-child {
    border-bottom: none;
  }
}

// ==========================================================================
// Accordion Header/Toggle
// ==========================================================================
// Accordion Header/Button
// ==========================================================================

.accordion-header {
  width: 100%;
  padding: 15px; // Exact value from reference
  background-color: #f8f9fa; // Exact background from reference
  border: none;
  border-bottom: 1px solid #e0e0e0; // Exact border color from reference
  text-align: left;
  font-family: inherit;
  font-size: inherit;
  color: $color-text;
  cursor: pointer;
  user-select: none;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: background-color 0.2s ease;
  
  &:hover {
    background-color: #e9ecef; // Exact hover color from reference
  }
  
  &:focus {
    @include focus-custom($offset: -3px);
  }
  
  &[aria-expanded="true"] .accordion-toggle {
    transform: rotate(90deg);
  }
}

// ==========================================================================
// Accordion Toggle Icon
// ==========================================================================

.accordion-toggle {
  font-size: 18px;
  transition: transform 0.2s ease;
  margin-left: 10px;
  color: $color-text;
}

// ==========================================================================
// Accordion Content
// ==========================================================================

.accordion-content {
  display: none;
  padding: $spacing-lg;
  border-bottom: 1px solid $color-border;
  
  &.expanded {
    display: block;
  }
}

// ==========================================================================
// Accordion Variations
// ==========================================================================

// Flush accordion (no outer borders/shadows)
.accordion-flush {
  box-shadow: none;
  border-radius: 0;
  
  .accordion-item {
    border-radius: 0;
  }
  
  .accordion-toggle {
    border-radius: 0;
  }
}

// Compact accordion
.accordion-compact {
  .accordion-toggle {
    padding: $spacing-md $spacing-lg;
    font-size: $font-size-small;
  }
  
  .accordion-body {
    padding: $spacing-lg;
  }
}

// ==========================================================================
// Accessibility Enhancements
// ==========================================================================

.accordion-toggle {
  // Ensure proper focus management
  &:focus {
    z-index: 1;
    position: relative;
  }
  
  // High contrast support
  @include high-contrast-mode();
}

// ==========================================================================
// Animation States
// ==========================================================================

.accordion-content {
  &.collapsing {
    transition: max-height $transition-base ease-in;
  }
  
  &.expanding {
    transition: max-height $transition-base ease-out;
  }
}

// Screen reader announcements
.accordion-sr-text {
  @include sr-only();
}

// ==========================================================================
// Page Card Component (Accordion-based)
// ==========================================================================

.page-card {
  background: $color-background-white;
  border: 1px solid $color-border;
  border-radius: $border-radius-small;
  margin-bottom: $spacing-xl;
  overflow: hidden;
}

.page-summary {
  display: flex;
  align-items: center;
  gap: $spacing-lg;
  flex-wrap: wrap;
}

.page-title {
  margin: 0;
  color: $color-text;
}

.page-url {
  color: $color-text;
  font-size: $font-size-small;
  word-break: break-all;
  flex: 1;
  min-width: 200px;
}

.page-stats {
  display: flex;
  gap: $spacing-md;
  align-items: center;
}

.stat-badge {
  padding: 4px $spacing-sm;
  border-radius: $border-radius-small;
  font-size: $font-size-smaller;
  font-weight: $font-weight-bold;
  display: flex;
  align-items: center;
  gap: 4px;
}

// ==========================================================================
// Page Details Header and Controls
// ==========================================================================

.page-details-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $spacing-xl;
  flex-wrap: wrap;
  gap: 15px;
}

.accordion-controls {
  display: flex;
  gap: 5px;
}

.control-btn {
  background: #0056b3;
  color: $color-white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
  
  &:hover {
    background: #004085;
  }
  
  &:focus {
    outline: 3px solid #0056b3;
    outline-offset: 3px;
  }
}

.expand-all-btn {
  background: #1e7e34;
  
  &:hover {
    background: #155724;
  }
  
  &:focus {
    outline: 3px solid #1e7e34;
    outline-offset: 3px;
  }
}

.collapse-all-btn {
  background: #545b62;
  
  &:hover {
    background: #3d4349;
  }
  
  &:focus {
    outline: 3px solid #545b62;
    outline-offset: 3px;
  }
}